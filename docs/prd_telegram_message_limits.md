# PRD: 텔레그램 메시지 길이 제한 개선

## 🎯 문제 정의
- `/sessions` 명령어 사용시 메시지가 길지 않음에도 "message too long" 에러 발생
- 현재 제한: 3500자 (일부 명령어에서만 적용)
- 일관성 없는 메시지 분할 처리

## 📋 요구사항

### 1. 메시지 길이 제한 통합
- 모든 텔레그램 메시지에 일관된 길이 제한 적용
- 현재 3500자 → **5000자**로 증가 (더 여유롭게)
- 자동 메시지 분할 로직 모든 명령어에 적용

### 2. 스마트 분할 로직
- 자연스러운 지점에서 메시지 분할 (줄바꿈, 구분자 기준)
- 코드 블록, 마크다운 서식 보존
- 연속된 메시지임을 명시하는 표시 추가

### 3. 에러 방지
- 메시지 전송 전 길이 검증
- 분할 실패 시 fallback 처리
- 명확한 에러 메시지 제공

## ✅ 성공 기준

### 테스트 시나리오
1. **긴 세션 목록 테스트**: 20개 이상 세션이 있을 때 `/sessions` 정상 동작
2. **긴 로그 메시지**: `/log` 명령어로 5000자 이상 로그 표시
3. **마크다운 보존**: 분할된 메시지에서 서식 유지
4. **에러 복구**: 분할 실패 시 적절한 fallback 메시지

### 품질 기준
- 모든 텔레그램 명령어에서 일관된 동작
- 메시지 분할시 90% 이상 내용 보존
- 사용자 경험 개선: 에러 대신 분할된 메시지 표시

## 🚀 구현 방향
1. 중앙화된 메시지 분할 유틸리티 함수 생성
2. 모든 명령어 핸들러에서 통일된 메시지 전송 함수 사용  
3. 테스트 케이스로 긴 메시지 시나리오 검증