# ğŸ“Š Claude-Ops ëª¨ë‹ˆí„°ë§ ë¡œì§ ë¶„ì„ ë³´ê³ ì„œ

**ìƒì„±ì¼ì‹œ**: 2025-09-08  
**ë¶„ì„ ëŒ€ìƒ**: Claude-Ops ì‘ì—… ê°ì§€ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ  
**ìš”ì²­ ì‚¬í•­**: ì‘ì—…ì¤‘ â†’ ì‘ì—… ë©ˆì¶¤ â†’ ì™„ë£Œ ì•Œë¦¼ íë¦„ ë¶„ì„

---

## ğŸ¯ í•µì‹¬ ë‹µë³€

**ë„¤, ì •í™•í•©ë‹ˆë‹¤!** í˜„ì¬ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‘ë™í•©ë‹ˆë‹¤:

```
1ï¸âƒ£ ì‘ì—…ì¤‘ (WORKING ìƒíƒœ) - "esc to interrupt" í‘œì‹œ ê°ì§€
    â†“
2ï¸âƒ£ ì‘ì—… ë©ˆì¶¤ (ìƒíƒœ ë³€ê²½) - ì‘ì—… í‘œì‹œê°€ ì‚¬ë¼ì§
    â†“  
3ï¸âƒ£ ì™„ë£Œ ì•Œë¦¼ ë°œì†¡ - ìƒíƒœ ì „í™˜ ê°ì§€ ì‹œ ìë™ ì•Œë¦¼
```

---

## ğŸ” ìƒì„¸ ë¶„ì„ ê²°ê³¼

### 1. ì‘ì—… ê°ì§€ ë©”ì»¤ë‹ˆì¦˜

#### ì‘ì—…ì¤‘ ìƒíƒœ ì¸ì‹ íŒ¨í„´ (`session_state.py:92-105`)
```python
working_patterns = [
    "esc to interrupt",           # Claude ì‘ì—…ì¤‘ í‘œì‹œ (í•µì‹¬)
    "Runningâ€¦",                   # ëª…ë ¹ ì‹¤í–‰ì¤‘
    "ctrl+b to run in background", # ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ ì˜µì…˜
    "â ‹", "â ™", "â ¹", "â ¸", "â ¼",      # ìŠ¤í”¼ë„ˆ ì• ë‹ˆë©”ì´ì…˜
]
```

**í•µì‹¬ ì›ë¦¬**: í™”ë©´ì˜ ë§ˆì§€ë§‰ 20ì¤„ì—ì„œ ìœ„ íŒ¨í„´ì„ ì°¾ìœ¼ë©´ â†’ **ì‘ì—…ì¤‘(WORKING)** íŒì •

### 2. ìƒíƒœ ì „í™˜ ê°ì§€ (`multi_monitor.py:118-159`)

#### ì•Œë¦¼ ë°œì†¡ ì¡°ê±´
```python
def should_send_completion_notification(session_name):
    current_state = get_session_state(session_name)
    previous_state = last_state.get(session_name)
    
    # í•µì‹¬ ë¡œì§: WORKING â†’ ë‹¤ë¥¸ ìƒíƒœë¡œ ì „í™˜ ì‹œ
    if previous_state == SessionState.WORKING and \
       current_state != SessionState.WORKING:
        return True  # ì•Œë¦¼ ë°œì†¡!
```

**í•µì‹¬ ì›ë¦¬**: 
- **ì´ì „**: WORKING (ì‘ì—…ì¤‘)
- **í˜„ì¬**: WORKINGì´ ì•„ë‹˜ (ì‘ì—… ì™„ë£Œ/ëŒ€ê¸°)
- **ê²°ê³¼**: ì™„ë£Œ ì•Œë¦¼ ë°œì†¡

### 3. ëª¨ë‹ˆí„°ë§ ë£¨í”„ (`multi_monitor.py:215-252`)

```python
while monitoring:
    # 1. í™”ë©´ ë³€í™” ì²´í¬ (5ì´ˆë§ˆë‹¤)
    screen_changed = has_screen_changed(session_name)
    
    # 2. í˜„ì¬ ì‘ì—… ìƒíƒœ í™•ì¸
    is_working = is_working(session_name)  
    
    # 3. ìƒíƒœ ì „í™˜ ë°œìƒ ì‹œ ì•Œë¦¼
    if should_send_completion_notification(session_name):
        send_completion_notification(session_name)
    
    time.sleep(5)  # 5ì´ˆ ê°„ê²© í´ë§
```

---

## ğŸ“‹ ì‹¤ì œ ì‘ë™ ì‹œë‚˜ë¦¬ì˜¤

### âœ… ì •ìƒ ì‹œë‚˜ë¦¬ì˜¤: ì‘ì—… ì™„ë£Œ
```
[10:00:00] Claude ì‘ì—… ì‹œì‘
           í™”ë©´: "Working on task... (esc to interrupt)"
           ìƒíƒœ: WORKING âœ…
           
[10:00:05] ê³„ì† ì‘ì—…ì¤‘...
           í™”ë©´: "Processing files... (esc to interrupt)"  
           ìƒíƒœ: WORKING (ìœ ì§€)
           
[10:00:10] ì‘ì—… ì™„ë£Œ!
           í™”ë©´: "Task completed successfully"
           ìƒíƒœ: IDLE ë˜ëŠ” WAITING_INPUT
           ê°ì§€: WORKING â†’ IDLE ì „í™˜ ê°ì§€! 
           ì•¡ì…˜: ğŸ“± Telegram ì•Œë¦¼ ë°œì†¡
```

### âš ï¸ 30ì´ˆ ì¿¨ë‹¤ìš´ ë³´í˜¸
```python
# ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€ ë¡œì§ (line 140-145)
if current_time - last_notification_time < 30:
    return False  # 30ì´ˆ ë‚´ ì¬ì•Œë¦¼ ì°¨ë‹¨
```

---

## ğŸš¨ ì£¼ìš” ë°œê²¬ì‚¬í•­

### 1. **"esc to interrupt"ê°€ í•µì‹¬ ì§€í‘œ**
- Claudeê°€ ì‘ì—…ì¤‘ì¼ ë•Œë§Œ ë‚˜íƒ€ë‚˜ëŠ” ê°€ì¥ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íŒ¨í„´
- ì´ í…ìŠ¤íŠ¸ê°€ ì‚¬ë¼ì§€ë©´ = ì‘ì—… ì™„ë£Œë¡œ íŒë‹¨

### 2. **ìµœê·¼ 20ì¤„ë§Œ ê²€ì‚¬**
- ê³¼ê±° ê¸°ë¡ì€ ë¬´ì‹œí•˜ê³  í˜„ì¬ í™”ë©´ë§Œ ë¶„ì„
- ì˜¤ë˜ëœ "Running..." ë©”ì‹œì§€ë¡œ ì¸í•œ ì˜¤íƒ ë°©ì§€

### 3. **ìƒíƒœ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ**
```python
STATE_PRIORITY = {
    ERROR: 0,           # ìµœìš°ì„ 
    WAITING_INPUT: 1,   # ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸°
    WORKING: 2,         # ì‘ì—…ì¤‘
    IDLE: 3,            # ìœ íœ´
    UNKNOWN: 4          # ë¯¸í™•ì¸
}
```

### 4. **5ì´ˆ í´ë§ ì£¼ê¸°**
- ë§¤ 5ì´ˆë§ˆë‹¤ ìƒíƒœ ì²´í¬
- ì‹¤ì‹œê°„ì„±ê³¼ ì„±ëŠ¥ì˜ ê· í˜•ì 

---

## ğŸ’¡ ê°œì„  ì œì•ˆì‚¬í•­

### 1. ë” ì •êµí•œ ì™„ë£Œ ê°ì§€
```python
# í˜„ì¬: ë‹¨ìˆœíˆ WORKINGì´ ì•„ë‹ˆë©´ ì™„ë£Œ
# ê°œì„ ì•ˆ: íŠ¹ì • ì™„ë£Œ íŒ¨í„´ ì¶”ê°€ ê°ì§€
completion_patterns = [
    "Task completed",
    "Successfully finished",
    "Done!",
    "âœ“ Complete"
]
```

### 2. ì‘ì—… ìœ í˜•ë³„ ì°¨ë³„í™”
```python
# ì§§ì€ ì‘ì—… vs ê¸´ ì‘ì—… êµ¬ë¶„
if work_duration < 10:  # 10ì´ˆ ë¯¸ë§Œ
    # ì¦‰ì‹œ ì•Œë¦¼
else:
    # ì•ˆì •í™” ëŒ€ê¸° í›„ ì•Œë¦¼
```

### 3. ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼
```python
# ì‘ì—… ë‚´ìš©ì— ë”°ë¥¸ ì•Œë¦¼ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•
if "test" in last_command:
    message = "í…ŒìŠ¤íŠ¸ ì™„ë£Œ!"
elif "build" in last_command:
    message = "ë¹Œë“œ ì™„ë£Œ!"
```

---

## ğŸ“Š ê²°ë¡ 

í˜„ì¬ ì‹œìŠ¤í…œì€ **"ì‘ì—… í‘œì‹œ ìˆìŒ â†’ ì—†ìŒ"** ì „í™˜ì„ ì •í™•íˆ ê°ì§€í•˜ì—¬ ì•Œë¦¼ì„ ë°œì†¡í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

**ì¥ì **:
- âœ… ë‹¨ìˆœí•˜ê³  ëª…í™•í•œ ë¡œì§
- âœ… ì˜¤íƒ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜ (30ì´ˆ ì¿¨ë‹¤ìš´)
- âœ… ìƒíƒœ ê¸°ë°˜ ì •í™•í•œ ê°ì§€

**ë‹¨ì **:
- âš ï¸ 5ì´ˆ ì§€ì—° ê°€ëŠ¥ (í´ë§ ì£¼ê¸°)
- âš ï¸ ë¹ ë¥¸ ì‘ì—…ì€ ë†“ì¹  ìˆ˜ ìˆìŒ
- âš ï¸ ì™„ë£Œ ìœ í˜• êµ¬ë¶„ ì—†ìŒ

ì „ë°˜ì ìœ¼ë¡œ **ì•ˆì •ì ì´ê³  ì‹¤ìš©ì ì¸ êµ¬í˜„**ì…ë‹ˆë‹¤!